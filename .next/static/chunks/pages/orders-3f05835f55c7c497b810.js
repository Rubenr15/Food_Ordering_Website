(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{4511:function(e,t,s){"use strict";var n=s(5893),i=s(381),a=s.n(i),l=s(3299),r=s(1664),d=s(5998),o=s.n(d),c=s(9669),m=s.n(c),x=s(7294),u=s(401);t.Z=function(e){var t=e._id,s=e.id,i=e.amount_total,d=e.timestamp,c=e.items,h=e.Status,p=e.admin,g=(0,l.useSession)(),v=g.data,f="laoding"===g.status,j=(0,x.useState)(!1),b=j[0],w=j[1];return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"w-full space-x-2",children:[p?h&&!f&&v&&null!==v&&void 0!==v&&v.admin?(0,n.jsxs)("select",{className:"shadow leading-tight focus:outline-none focus:shadow-outline border xs:text-sm text-xs p-2  bg-blue-500 text-white capitalize border-b-0 rounded-t-md",value:h,disabled:b,onChange:function(e){w(!0),m().post("/api/admin/update-order-Status",{Status:e.target.value,_id:t}).then((function(){w(!1)})).catch((function(e){console.error(e),w(!1)}))},children:[(0,n.jsx)("option",{value:"shipping soon",children:"Shipping soon"}),(0,n.jsx)("option",{value:"shipped",children:"Shipped"}),(0,n.jsx)("option",{value:"out for delivery",children:"Out for delivery"}),(0,n.jsx)("option",{value:"delivered",children:"Delivered"})]}):(0,n.jsx)(n.Fragment,{}):h?(0,n.jsx)("div",{className:"border border-b-0 xs:text-sm text-xs px-4 py-2 rounded-t-md  ".concat("cancelled"===h?"bg-red-500":"delivered"!==h?"bg-blue-500":"bg-green-500"," text-white inline-block capitalize"),children:h}):(0,n.jsx)(n.Fragment,{}),h&&"cancelled"!==h&&"delivered"!==h?(0,n.jsx)("button",{className:"button-red border border-b-0 xs:text-sm text-xs px-4 py-2 rounded-t-md rounded-b-none  inline-block  capitalize ".concat(b?"opacity-50":""),onClick:function(){w(!0),m().post("/api/cancel-order",{Status:"cancelled",_id:t}).then((function(){(0,u.Z)("Order cancelled"),w(!1)})).catch((function(e){console.error(e),(0,u.Z)("Something went wrong",!0),w(!1)}))},disabled:b,children:"Cancel order"}):(0,n.jsx)(n.Fragment,{})]}),(0,n.jsx)(r.default,{href:"/".concat(p&&null!==v&&void 0!==v&&v.admin?"admin/":"","order-details/").concat(t),children:(0,n.jsxs)("div",{className:"relative border rounded-md rounded-tl-none cursor-pointer hover:shadow-sm bg-white overflow-hidden ".concat(h&&"cancelled"===h?"opacity-70":""),title:"Click to view order details",children:[(0,n.jsxs)("div",{className:"sm:p-6 p-4 bg-gray-100 sm:text-sm text-xs text-gray-600",children:[h&&"cancelled"===h?(0,n.jsx)("p",{className:"mb-2 text-red-500",children:"* Money will be refunded within 24 hour"}):(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)("p",{className:"sm:absolute sm:top-2 sm:right-2 sm:w-56 lg:w-72 truncate text-xs whitespace-nowrap sm:mb-0 mb-2 font-medium",children:["ORDER # ",(0,n.jsx)("span",{className:"text-green-500",children:s})]}),(0,n.jsxs)("div",{className:"flex sm:items-center sm:gap-6 gap-1 sm:flex-row flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center sm:gap-6 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-bold text-xs",children:"ORDER PLACED"}),(0,n.jsx)("p",{children:a()(d).format("DD MMM YYYY")})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs font-bold",children:"TOTAL"}),(0,n.jsx)("p",{className:"text-xs font-bold text-red-500",children:(0,n.jsx)(o(),{quantity:i,currency:"INR"})})]})]}),(0,n.jsxs)("p",{className:"lg:text-xl md:text-lg sm:text-base text-sm font-medium  whitespace-nowrap  self-end flex-1 text-right text-blue-500",children:[null===c||void 0===c?void 0:c.length," items"]})]})]}),(0,n.jsx)("div",{className:"sm:p-6 p-4",children:(0,n.jsx)("div",{className:"flex space-x-6 overflow-x-auto py-4 hideScrollBar",children:null===c||void 0===c?void 0:c.map((function(e){return(0,n.jsx)("img",{className:"h-20 object-contain sm:h-32",src:null===e||void 0===e?void 0:e.image,alt:"",loading:"lazy"},"item-img-".concat(null===e||void 0===e?void 0:e._id))}))})})]})})]})}},76:function(e,t,s){"use strict";s.r(t);var n=s(5893),i=s(3299),a=s(4511),l=s(5723),r=s(1655),d=s(5675),o=s(9008);t.default=function(){var e=(0,i.useSession)(),t=e.data,s="loading"===e.status,c=(0,l.ZP)(!s&&t?"/api/orders":null),m=c.data,x=c.error;return x&&console.error(x),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.default,{children:(0,n.jsx)("title",{children:"Zeal | Orders"})}),(0,n.jsx)("div",{className:" heightFix px-6",children:(0,n.jsxs)("main",{className:"max-w-screen-xl mx-auto md:py-20 py-12 pb-20",children:[(0,n.jsx)("h1",{className:"sm:text-2xl text-xl font-semibold border-b-2 mb-2 pb-4 border-gray-200 text-gray-700 h-full",children:"Your Orders"}),t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"font-medium text-lg  my-2 text-primary-light",children:m?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"font-semibold text-xl mr-2",children:null===m||void 0===m?void 0:m.length}),"Orders"]}):(0,n.jsx)(r.ZP,{width:100})}),m?m.length?(0,n.jsx)("div",{className:"mt-5 space-y-6",children:m.map((function(e){var t,s=e._id,i=e.id,l=e.amount_total,r=e.items,d=e.timestamp,o=e.order_status;return(0,n.jsx)(a.Z,{id:i,_id:s,amount_total:l/100,timestamp:d,items:r,status:null===o||void 0===o||null===(t=o.current)||void 0===t?void 0:t.status},"order-".concat(s))}))}):(0,n.jsx)("div",{className:"h-full flex items-center justify-center mt-16 sm:w-auto w-3/4 mx-auto sm:max-w-xs ",children:(0,n.jsx)(d.default,{src:"/img/empty.svg",width:300,height:300,alt:"",objectFit:"contain"})}):(0,n.jsx)(r.ZP,{count:12})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center sm:text-lg text-base  font-medium mt-12",children:[(0,n.jsxs)("h2",{children:["Please",(0,n.jsx)("span",{className:"link underline text-primary-light mx-2",onClick:i.signIn,children:"login"}),"in to view your orders."]}),(0,n.jsx)("div",{className:"md:max-w-none max-w-xs sm:w-auto w-3/4 mx-auto",children:(0,n.jsx)(d.default,{src:"/img/authentication.svg",width:450,height:450,alt:""})})]})})]})})]})}},401:function(e,t,s){"use strict";var n=s(5893),i=s(9249);t.Z=function(e,t){(0,i.Am)((0,n.jsx)("div",{className:"font-medium",children:(0,n.jsx)("span",{className:"".concat(t?"text-red-500":""),children:e})}),{position:"top-right",autoClose:4e3,style:{background:"white",color:"#1f2937",fontFamily:"Poppins, sans-serif",height:"auto"},hideProgressBar:!0,pauseOnHover:!1,draggable:!0,draggablePercent:25})}},5626:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orders",function(){return s(76)}])}},function(e){e.O(0,[885,998,774,888,179],(function(){return t=5626,e(e.s=t);var t}));var t=e.O();_N_E=t}]);