(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{4511:function(e,s,t){"use strict";var a=t(5893),i=t(381),n=t.n(i),d=t(3299),l=t(1664),r=t(5998),c=t.n(r),o=t(9669),m=t.n(o),x=t(7294),h=t(401);s.Z=function(e){var s=e._id,t=e.id,i=e.amount_total,r=e.timestamp,o=e.items,u=e.Status,p=e.admin,g=(0,d.useSession)(),f=g.data,j="laoding"===g.status,v=(0,x.useState)(!1),b=v[0],N=v[1];return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"w-full space-x-2",children:[p?u&&!j&&f&&null!==f&&void 0!==f&&f.admin?(0,a.jsxs)("select",{className:"shadow leading-tight focus:outline-none focus:shadow-outline border xs:text-sm text-xs p-2  bg-blue-500 text-white capitalize border-b-0 rounded-t-md",value:u,disabled:b,onChange:function(e){N(!0),m().post("/api/admin/update-order-Status",{Status:e.target.value,_id:s}).then((function(){N(!1)})).catch((function(e){console.error(e),N(!1)}))},children:[(0,a.jsx)("option",{value:"shipping soon",children:"Shipping soon"}),(0,a.jsx)("option",{value:"shipped",children:"Shipped"}),(0,a.jsx)("option",{value:"out for delivery",children:"Out for delivery"}),(0,a.jsx)("option",{value:"delivered",children:"Delivered"})]}):(0,a.jsx)(a.Fragment,{}):u?(0,a.jsx)("div",{className:"border border-b-0 xs:text-sm text-xs px-4 py-2 rounded-t-md  ".concat("cancelled"===u?"bg-red-500":"delivered"!==u?"bg-blue-500":"bg-green-500"," text-white inline-block capitalize"),children:u}):(0,a.jsx)(a.Fragment,{}),u&&"cancelled"!==u&&"delivered"!==u?(0,a.jsx)("button",{className:"button-red border border-b-0 xs:text-sm text-xs px-4 py-2 rounded-t-md rounded-b-none  inline-block  capitalize ".concat(b?"opacity-50":""),onClick:function(){N(!0),m().post("/api/cancel-order",{Status:"cancelled",_id:s}).then((function(){(0,h.Z)("Order cancelled"),N(!1)})).catch((function(e){console.error(e),(0,h.Z)("Something went wrong",!0),N(!1)}))},disabled:b,children:"Cancel order"}):(0,a.jsx)(a.Fragment,{})]}),(0,a.jsx)(l.default,{href:"/".concat(p&&null!==f&&void 0!==f&&f.admin?"admin/":"","order-details/").concat(s),children:(0,a.jsxs)("div",{className:"relative border rounded-md rounded-tl-none cursor-pointer hover:shadow-sm bg-white overflow-hidden ".concat(u&&"cancelled"===u?"opacity-70":""),title:"Click to view order details",children:[(0,a.jsxs)("div",{className:"sm:p-6 p-4 bg-gray-100 sm:text-sm text-xs text-gray-600",children:[u&&"cancelled"===u?(0,a.jsx)("p",{className:"mb-2 text-red-500",children:"* Money will be refunded within 24 hour"}):(0,a.jsx)(a.Fragment,{}),(0,a.jsxs)("p",{className:"sm:absolute sm:top-2 sm:right-2 sm:w-56 lg:w-72 truncate text-xs whitespace-nowrap sm:mb-0 mb-2 font-medium",children:["ORDER # ",(0,a.jsx)("span",{className:"text-green-500",children:t})]}),(0,a.jsxs)("div",{className:"flex sm:items-center sm:gap-6 gap-1 sm:flex-row flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center sm:gap-6 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-xs",children:"ORDER PLACED"}),(0,a.jsx)("p",{children:n()(r).format("DD MMM YYYY")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-bold",children:"TOTAL"}),(0,a.jsx)("p",{className:"text-xs font-bold text-red-500",children:(0,a.jsx)(c(),{quantity:i,currency:"INR"})})]})]}),(0,a.jsxs)("p",{className:"lg:text-xl md:text-lg sm:text-base text-sm font-medium  whitespace-nowrap  self-end flex-1 text-right text-blue-500",children:[null===o||void 0===o?void 0:o.length," items"]})]})]}),(0,a.jsx)("div",{className:"sm:p-6 p-4",children:(0,a.jsx)("div",{className:"flex space-x-6 overflow-x-auto py-4 hideScrollBar",children:null===o||void 0===o?void 0:o.map((function(e){return(0,a.jsx)("img",{className:"h-20 object-contain sm:h-32",src:null===e||void 0===e?void 0:e.image,alt:"",loading:"lazy"},"item-img-".concat(null===e||void 0===e?void 0:e._id))}))})})]})})]})}},2446:function(e,s,t){"use strict";t.r(s);var a=t(5893),i=t(1664),n=t(5723),d=t(1655),l=t(5675),r=t(4511),c=t(3299),o=t(9008),m=t(6049);function x(){var e=(0,c.useSession)(),s=e.data,t="loading"===e.status,x=(0,n.ZP)(!t&&s&&s.admin?"/api/admin/active-orders":null),h=x.data,u=x.error;return u&&console.error(u),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.default,{children:(0,a.jsx)("title",{children:"Zeal | Dashboard"})}),(0,a.jsx)("div",{className:"heightFixAdmin bg-gray-100 py-10 md:px-6",children:(0,a.jsx)("div",{className:"max-w-screen-xl mx-auto bg-white  shadow rounded-md my-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:p-8  p-6  bg-white gap-6",children:[(0,a.jsx)("h1",{className:"sm:text-2xl text-xl  font-semibold border-b-2 border-gray-200 pb-4 text-gray-700",children:"Dashboard"}),(0,a.jsxs)("div",{className:"flex gap-4 sm:gap-6 lg:gap-8  text-primary-light font-medium flex-wrap sm:text-base text-sm",children:[(0,a.jsx)(i.default,{href:"/admin/dishes",children:(0,a.jsxs)("div",{className:"dashboard-link flex items-center gap-1",children:[(0,a.jsx)(m.rKT,{className:"w-4"}),(0,a.jsx)("span",{children:"Dishes"})]})}),(0,a.jsx)(i.default,{href:"/admin/categories",children:(0,a.jsx)("div",{className:"dashboard-link flex items-center gap-1",children:(0,a.jsx)("span",{children:"Categories"})})}),(0,a.jsx)(i.default,{href:"/admin/users",children:(0,a.jsxs)("div",{className:"dashboard-link flex items-center gap-1",children:[(0,a.jsx)(m.oyc,{className:"w-4"}),(0,a.jsx)("span",{children:"Users"})]})}),(0,a.jsx)(i.default,{href:"/admin/add-dish",children:(0,a.jsx)("div",{className:"dashboard-link flex items-center gap-1",children:(0,a.jsx)("span",{children:"Add Dish"})})}),(0,a.jsx)(i.default,{href:"/admin/add-category",children:(0,a.jsx)("div",{className:"dashboard-link flex items-center gap-1",children:(0,a.jsx)("span",{children:"Add Category"})})})]}),(0,a.jsx)("div",{className:"lg:mt-10 sm:mt-8 mt-6",children:(0,a.jsx)("h4",{className:"sm:text-xl text-lg font-semibold",children:"Active Orders"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-medium text-lg  my-2 text-primary-light",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"font-semibold text-xl mr-2",children:null===h||void 0===h?void 0:h.length}),"Orders"]}):(0,a.jsx)(d.ZP,{width:100})}),h?null!==h&&void 0!==h&&h.length?(0,a.jsx)("div",{className:"mt-5 space-y-6",children:h.map((function(e){var s,t=e._id,i=e.id,n=e.amount_total,d=e.items,l=e.timestamp,c=e.order_status;return(0,a.jsx)(r.Z,{id:i,_id:t,amount_total:n/100,timestamp:l,items:d,status:null===c||void 0===c||null===(s=c.current)||void 0===s?void 0:s.status,admin:!0},"order-".concat(t))}))}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center mt-16 sm:w-auto w-3/4 mx-auto sm:max-w-xs ",children:(0,a.jsx)(l.default,{src:"/img/empty.svg",width:300,height:300,alt:"",objectFit:"contain"})}):(0,a.jsx)(d.ZP,{count:12})]})]})})})]})}x.admin=!0,s.default=x},401:function(e,s,t){"use strict";var a=t(5893),i=t(9249);s.Z=function(e,s){(0,i.Am)((0,a.jsx)("div",{className:"font-medium",children:(0,a.jsx)("span",{className:"".concat(s?"text-red-500":""),children:e})}),{position:"top-right",autoClose:4e3,style:{background:"white",color:"#1f2937",fontFamily:"Poppins, sans-serif",height:"auto"},hideProgressBar:!0,pauseOnHover:!1,draggable:!0,draggablePercent:25})}},4737:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return t(2446)}])}},function(e){e.O(0,[885,998,774,888,179],(function(){return s=4737,e(e.s=s);var s}));var s=e.O();_N_E=s}]);