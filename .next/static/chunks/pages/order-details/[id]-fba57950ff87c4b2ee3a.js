(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{562:function(e,s,l){"use strict";l.d(s,{Z:function(){return j}});var i=l(5893),n=l(7294),t=l(381),d=l.n(t),a=l(5998),o=l.n(a),r=l(5723),c=l(1655),u=l(5675);var m=function(e){var s=e.item;return(0,i.jsxs)("div",{className:"flex sm:flex-row flex-col-reverse my-4 text-sm text-gray-700 p-6 border border-gray-200 sm:justify-between gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-semibold capitalize",children:null===s||void 0===s?void 0:s.title}),(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{children:"Quantity - "}),null===s||void 0===s?void 0:s.qty]}),(0,i.jsxs)("p",{className:"font-semibold",children:[(0,i.jsx)("span",{className:"font-normal",children:"Price - "}),(0,i.jsx)(o(),{quantity:null===s||void 0===s?void 0:s.price,currency:"INR"})]})]})]}),(0,i.jsx)("div",{className:"sm:mx-0 sm:ml-6 min-w-max my-auto mx-auto",children:(0,i.jsx)(u.default,{src:null===s||void 0===s?void 0:s.image,width:120,height:120,alt:"",objectFit:"contain"})})]})},x=l(3299),v=l(9669),h=l.n(v),p=l(401);var j=function(e){var s,l,t,a,u,v,j,f,b,g,N,_,y,w,S,O,P,C,Z,F,E,I,R,k,q,D,z,A,B,L,T,M,X,H,Q=e.id,G=e.admin,J=(0,x.useSession)(),K=J.data,U="loading"===J.status,V=(0,n.useState)(!1),W=V[0],Y=V[1],$=(0,r.ZP)(!U&&K?"/api/order-details/".concat(Q):null),ee=$.data,se=$.error;return se&&console.error(se),(0,i.jsx)("div",{className:"heightFix sm:px-6",children:(0,i.jsxs)("div",{className:"border rounded-md max-w-screen-xl  mx-auto md:my-20 my-12 shadow-sm",children:[(0,i.jsxs)("div",{className:"flex items-center p-5 bg-gray-100 text-sm text-gray-700",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"sm:text-2xl text-xl font-semibold mb-2",children:"Order Details"}),(0,i.jsx)("p",{className:"xs:text-sm text-xs",children:ee?d()(null===ee||void 0===ee?void 0:ee.timestamp).format("llll"):(0,i.jsx)(c.ZP,{})})]}),ee&&(0,i.jsxs)("p",{className:"lg:text-xl md:text-lg text-base font-medium whitespace-nowrap  self-end flex-1 text-right text-blue-500",children:[null===ee||void 0===ee||null===(s=ee.items)||void 0===s?void 0:s.length," items"]})]}),(0,i.jsx)("div",{className:"p-5 md:p-10 sm:p-8",children:ee?(0,i.jsxs)(i.Fragment,{children:[G&&null!==K&&void 0!==K&&K.admin&&"cancelled"!==(null===ee||void 0===ee||null===(l=ee.order_status)||void 0===l||null===(t=l.current)||void 0===t?void 0:t.status)&&"delivered"!==(null===ee||void 0===ee||null===(a=ee.order_status)||void 0===a||null===(u=a.current)||void 0===u?void 0:u.status)?(0,i.jsxs)("select",{className:"shadow leading-tight focus:outline-none focus:shadow-outline border xs:text-sm text-xs p-2 rounded bg-blue-500 text-white capitalize",disabled:W,onChange:function(e){Y(!0),h().post("/api/admin/update-order-status",{status:e.target.value,_id:Q}).then((function(){Y(!1)})).catch((function(e){Y(!1),console.error(e)}))},children:[(0,i.jsx)("option",{value:"shipping_details soon",children:"Shipping_details soon"}),(0,i.jsx)("option",{value:"shipped",children:"Shipped"}),(0,i.jsx)("option",{value:"out for delivery",children:"Out for delivery"}),(0,i.jsx)("option",{value:"delivered",children:"Delivered"})]}):(0,i.jsx)(i.Fragment,{}),(0,i.jsxs)("div",{className:"space-y-6 lg:text-lg sm:text-base text-sm",children:[(0,i.jsxs)("div",{className:"my-2 p-4 border-2 ".concat("cancelled"===(null===ee||void 0===ee||null===(v=ee.order_status)||void 0===v||null===(j=v.current)||void 0===j?void 0:j.status)?"text-red-500 border-red-500 bg-red-100":"delivered"===(null===ee||void 0===ee||null===(f=ee.order_status)||void 0===f?void 0:f.current.status)?"text-green-500 border-green-500 bg-green-100":"text-blue-500 border-blue-500 bg-blue-100","  rounded-md"),children:[(0,i.jsx)("h1",{className:"font-semibold mb-4",children:"Order Status"}),(0,i.jsx)("ul",{className:"space-y-2",children:null===ee||void 0===ee||null===(b=ee.order_status)||void 0===b||null===(g=b.info)||void 0===g?void 0:g.map((function(e,s){var l=e.status,n=e.timestamp;return(0,i.jsxs)("li",{className:"flex sm:items-center sm:justify-between sm:flex-row flex-col",children:[(0,i.jsx)("span",{className:"sm:text-sm text-xs font-medium capitalize",children:l}),(0,i.jsx)("span",{className:"sm:text-sm text-xs",children:d()(n).format("llll")})]},"orderStatus-".concat(s))}))})]}),"cancelled"===(null===ee||void 0===ee||null===(N=ee.order_status)||void 0===N||null===(_=N.current)||void 0===_?void 0:_.status)?(0,i.jsx)("p",{className:"my-2 text-xs xs:text-sm text-red-500",children:"* Money will be refunded within 24 hour"}):(0,i.jsx)(i.Fragment,{}),(0,i.jsxs)("p",{className:"whitespace-nowrap font-semibold overflow-x-auto hideScrollBar",children:["ORDER ID -",(0,i.jsx)("span",{className:"text-green-500 font-medium ml-2",children:null===ee||void 0===ee?void 0:ee.id})]}),(0,i.jsxs)("p",{className:"font-semibold whitespace-nowrap overflow-x-auto hideScrollBar flex items-center",children:["EMAIL -",(0,i.jsx)("span",{className:"text-sm font-normal ml-2",children:null===ee||void 0===ee||null===(y=ee.customer_details)||void 0===y?void 0:y.email})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold mb-2 uppercase",children:"Address "}),(0,i.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-semibold",children:" Name - "}),null===ee||void 0===ee||null===(w=ee.shipping_details)||void 0===w?void 0:w.name]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-semibold",children:"City - "}),null===ee||void 0===ee||null===(S=ee.shipping_details)||void 0===S||null===(O=S.address)||void 0===O?void 0:O.city]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-semibold",children:"Country - "}),null===ee||void 0===ee||null===(P=ee.shipping_details)||void 0===P||null===(C=P.address)||void 0===C?void 0:C.country]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-semibold",children:"Line 1 - "}),null===ee||void 0===ee||null===(Z=ee.shipping_details)||void 0===Z||null===(F=Z.address)||void 0===F?void 0:F.line1,","]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-semibold",children:"Line 2 - "}),null===ee||void 0===ee||null===(E=ee.shipping_details)||void 0===E||null===(I=E.address)||void 0===I?void 0:I.line2]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-semibold",children:"Postal Code - "}),null===ee||void 0===ee||null===(R=ee.shipping_details)||void 0===R||null===(k=R.address)||void 0===k?void 0:k.postal_code]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-semibold",children:"State - "}),null===ee||void 0===ee||null===(q=ee.shipping_details)||void 0===q||null===(D=q.address)||void 0===D?void 0:D.state]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold mb-2  uppercase",children:"Amount"}),(0,i.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-semibold",children:"Subtotal - "}),(0,i.jsx)(o(),{quantity:(null===ee||void 0===ee?void 0:ee.amount_subtotal)/100,currency:"INR"})]}),(0,i.jsxs)("p",{className:"text-green-500 font-semibold",children:[(0,i.jsx)("span",{children:"Shipping_details - "}),(0,i.jsx)(o(),{quantity:(null===ee||void 0===ee||null===(z=ee.total_details)||void 0===z?void 0:z.amount_shipping_details)/100,currency:"INR"})]}),(0,i.jsxs)("p",{className:"font-bold text-red-500",children:[(0,i.jsx)("span",{className:"font-semibold",children:"Total - "}),(0,i.jsx)(o(),{quantity:(null===ee||void 0===ee?void 0:ee.amount_total)/100,currency:"INR"})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-semibold mb-2  uppercase",children:"Items"}),null===ee||void 0===ee||null===(A=ee.items)||void 0===A?void 0:A.map((function(e){return(0,i.jsx)(m,{item:e},"order-item-".concat(null===e||void 0===e?void 0:e._id))}))]}),null!==ee&&void 0!==ee&&null!==(B=ee.order_status)&&void 0!==B&&null!==(L=B.current)&&void 0!==L&&L.status&&"cancelled"!==(null===ee||void 0===ee||null===(T=ee.order_status)||void 0===T||null===(M=T.current)||void 0===M?void 0:M.status)&&"delivered"!==(null===ee||void 0===ee||null===(X=ee.order_status)||void 0===X||null===(H=X.current)||void 0===H?void 0:H.status)?(0,i.jsx)("div",{className:"py-4",children:(0,i.jsx)("button",{className:"button-red py-2 px-12 capitalize w-full sm:text-base text-sm ".concat(W?"opacity-50":""),onClick:function(){Y(!0),h().post("/api/cancel-order",{status:"cancelled",_id:Q}).then((function(){(0,p.Z)("Order cancelled"),Y(!1)})).catch((function(e){console.error(e),(0,p.Z)("Something went wrong",!0),Y(!1)}))},disabled:W,children:"Cancel Order"})}):(0,i.jsx)(i.Fragment,{})]})]}):(0,i.jsx)(c.ZP,{count:30})})]})})}},9690:function(e,s,l){"use strict";l.r(s);var i=l(5893),n=l(1163),t=l(562),d=l(9008);function a(){var e,s=(0,n.useRouter)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.default,{children:(0,i.jsx)("title",{children:"Zinger | OrderDetails"})}),(0,i.jsx)(t.Z,{id:null===(e=s.query)||void 0===e?void 0:e.id})]})}a.auth=!0,s.default=a},401:function(e,s,l){"use strict";var i=l(5893),n=l(9249);s.Z=function(e,s){(0,n.Am)((0,i.jsx)("div",{className:"font-medium",children:(0,i.jsx)("span",{className:"".concat(s?"text-red-500":""),children:e})}),{position:"top-right",autoClose:4e3,style:{background:"white",color:"#1f2937",fontFamily:"Poppins, sans-serif",height:"auto"},hideProgressBar:!0,pauseOnHover:!1,draggable:!0,draggablePercent:25})}},5606:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/order-details/[id]",function(){return l(9690)}])}},function(e){e.O(0,[885,998,774,888,179],(function(){return s=5606,e(e.s=s);var s}));var s=e.O();_N_E=s}]);